!function(e){function t(){var t=o.getBoundingClientRect().width;t/i>640&&(t=640*i),e.rem=t/16,o.style.fontSize=e.rem+"px"}var i,a,n,r=e.document,o=r.documentElement,l=r.querySelector('meta[name="viewport"]'),m=r.querySelector('meta[name="flexible"]');if(l){var s=l.getAttribute("content").match(/initial\-scale=(["']?)([\d\.]+)\1?/);s&&(a=parseFloat(s[2]),i=parseInt(1/a))}else if(m){var s=m.getAttribute("content").match(/initial\-dpr=(["']?)([\d\.]+)\1?/);s&&(i=parseFloat(s[2]),a=parseFloat((1/i).toFixed(2)))}if(!i&&!a){var d=(e.navigator.appVersion.match(/android/gi),e.navigator.appVersion.match(/iphone/gi));i=e.devicePixelRatio,i=d?i>=3?3:i>=2?2:1:1,a=1/i}if(o.setAttribute("data-dpr",i),!l)if(l=r.createElement("meta"),l.setAttribute("name","viewport"),l.setAttribute("content","initial-scale="+a+", maximum-scale="+a+", minimum-scale="+a+", user-scalable=no"),o.firstElementChild)o.firstElementChild.appendChild(l);else{var c=r.createElement("div");c.appendChild(l),r.write(c.innerHTML)}e.dpr=i,e.addEventListener("resize",function(){clearTimeout(n),n=setTimeout(t,300)},!1),e.addEventListener("pageshow",function(e){e.persisted&&(clearTimeout(n),n=setTimeout(t,300))},!1),t()}(window);
